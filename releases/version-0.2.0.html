<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Version 0.2.0 (beta release) &#8212; ross 0.3.3 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx_copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/sphinx_copybutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../_static/ross-logo.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/ross-logo.svg"></span>
          ROSS</a>
        <span class="navbar-text navbar-version pull-left"><b>0.3</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../examples/tutorial.html">Tutorial</a></li>
                <li><a href="../examples.html">Examples</a></li>
                <li><a href="../api.html">API</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#install-python">Install Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html#install-ross">Install ROSS</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/tutorial.html#Materials">Materials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/tutorial.html#ShaftElement">ShaftElement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/tutorial.html#DiskElement">DiskElement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/tutorial.html#BearingElement">BearingElement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/tutorial.html#Rotor">Rotor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/tutorial.html#Running-the-simulation">Running the simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/tutorial.html#Obtaining-results">Obtaining results</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_1.html">Example 1 - Number of DOF influence in Natural Frequency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_2.html">Example 2 - Effect of varying slenderness ratio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_3.html">Example 3 - Isotropic Bearings, asymmetrical rotor.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_4.html">Example 4 - Anisotropic Bearings.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_5.html">Example 5 - Cross-coupled bearings.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_6.html">Example 6 - Isotropic bearings with damping.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_7.html">Example 7 - Hydrodinamic Bearings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/example_8.html">Example 8 - Overhung rotor.</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../download.html">Download notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api.html#material">Material</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#elements">Elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html#rotor">Rotor</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#feedback-and-contribution">Feedback and Contribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#version-control-system-git">Version-control system: Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#code-style-black">Code style: Black</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#integrated-development-environment-pycharm">Integrated development environment: PyCharm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#how-to-contribute-to-ross-using-git">How to contribute to ROSS using git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing.html#making-new-releases">Making new releases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release_notes.html#version-0-2-0-beta-release">Version 0.2.0 (beta release)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes.html#version-0-1-0-alpha-release">Version 0.1.0 (alpha release)</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Version 0.2.0 (beta release)</a><ul>
<li><a class="reference internal" href="#enhancements">Enhancements</a><ul>
<li><a class="reference internal" href="#improvements-for-plotting-results">Improvements for plotting results</a></li>
<li><a class="reference internal" href="#index-method">Index method</a></li>
<li><a class="reference internal" href="#interactions-with-rotor-plotting">interactions with rotor plotting</a></li>
<li><a class="reference internal" href="#move-time-response-plotting-to-results">Move time response plotting to results</a></li>
<li><a class="reference internal" href="#add-tapered-shaft-element">Add tapered shaft element</a></li>
<li><a class="reference internal" href="#improving-plot-rotor">Improving plot rotor</a></li>
<li><a class="reference internal" href="#add-check-slenderness-ratio-method">Add Check slenderness ratio method</a></li>
<li><a class="reference internal" href="#make-free-body-diagram-more-readable">Make Free-Body Diagram more readable</a></li>
<li><a class="reference internal" href="#replace-bearing-plot-style-remove-element-length-dependency-from-glyphs">Replace bearing plot style / remove element length dependency from glyphs</a></li>
<li><a class="reference internal" href="#add-api-report">Add API_report</a></li>
<li><a class="reference internal" href="#add-new-tag-attribute-to-elements">Add new “Tag” attribute to elements</a></li>
<li><a class="reference internal" href="#add-separated-dataframe-to-seals">Add separated DataFrame to seals</a></li>
<li><a class="reference internal" href="#split-staticresults-plot-method">Split StaticResults plot method</a></li>
<li><a class="reference internal" href="#add-ballbearing-and-rollerbearing-element">Add BallBearing and RollerBearing Element</a></li>
<li><a class="reference internal" href="#add-condition-to-shafttaperedelement-instantiation">Add condition to ShaftTaperedElement instantiation</a></li>
<li><a class="reference internal" href="#patches-for-pointmass-element">Patches for PointMass element</a></li>
<li><a class="reference internal" href="#add-repr-eq-and-example-to-point-mass-element">Add __repr__, __eq__, and example() to point mass element</a></li>
<li><a class="reference internal" href="#improvements-to-static-analysis-documentation">Improvements to Static Analysis Documentation</a></li>
<li><a class="reference internal" href="#general-modifications-in-campbellresults">General Modifications in CampbellResults</a></li>
<li><a class="reference internal" href="#add-summary-table-to-plot-rotor-information">Add summary table to plot rotor information</a></li>
<li><a class="reference internal" href="#improvements-to-summaryresults">Improvements to SummaryResults</a></li>
<li><a class="reference internal" href="#add-stability-level-1-analysis">Add Stability Level 1 analysis</a></li>
<li><a class="reference internal" href="#add-bearing-summary-table">Add Bearing Summary Table</a></li>
<li><a class="reference internal" href="#improvements-to-api-report-py-add-test-api-report-py">Improvements to api_report.py - Add test_api_report.py</a></li>
<li><a class="reference internal" href="#add-stability-analysis-level-2">Add stability analysis level 2</a></li>
<li><a class="reference internal" href="#visual-improvements-to-graphs">Visual improvements to graphs</a></li>
<li><a class="reference internal" href="#add-method-to-plot-orbit">Add method to plot orbit</a></li>
<li><a class="reference internal" href="#d-plots-for-orbit-response">3D plots for orbit response</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-changes">API changes</a></li>
<li><a class="reference internal" href="#bug-fixes">Bug fixes</a><ul>
<li><a class="reference internal" href="#fix-equality-for-bearing-element">Fix equality for bearing element</a></li>
<li><a class="reference internal" href="#add-import-to-axes3d">Add import to Axes3d</a></li>
<li><a class="reference internal" href="#fix-bearing-type-definition-and-add-new-test">Fix bearing type definition and add new test</a></li>
<li><a class="reference internal" href="#id1">Improvements for plotting results</a></li>
<li><a class="reference internal" href="#fix-bug-plotting-unbalance-response">Fix bug - plotting unbalance response</a></li>
<li><a class="reference internal" href="#id2">Make Free-Body Diagram more readable</a></li>
<li><a class="reference internal" href="#fix-typo-in-repr">Fix typo in __repr__</a></li>
<li><a class="reference internal" href="#fix-inconsistencies-in-the-stiffness-matrix">Fix inconsistencies in the stiffness matrix</a></li>
<li><a class="reference internal" href="#fixing-doctests">Fixing doctests</a></li>
<li><a class="reference internal" href="#adapt-convergence-analysis-to-shafttaperedelement">Adapt convergence analysis to ShaftTaperedElement</a></li>
<li><a class="reference internal" href="#id3">Add separated DataFrame to seals</a></li>
<li><a class="reference internal" href="#fix-warning-when-changing-number-of-nodes-to-be-plotted">Fix warning when changing number of nodes to be plotted</a></li>
<li><a class="reference internal" href="#remove-unit-conversion-factor">Remove unit conversion factor</a></li>
<li><a class="reference internal" href="#id4">Improvements to Static Analysis Documentation</a></li>
<li><a class="reference internal" href="#fix-bearings-not-connecting-to-tapered-elements">Fix bearings not connecting to tapered elements</a></li>
<li><a class="reference internal" href="#fix-bug-when-plotting-bearings">Fix bug when plotting bearings</a></li>
<li><a class="reference internal" href="#fix-bug-in-run-freq-response">Fix bug in .run_freq_response()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/releases/version-0.2.0.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="version-0-2-0-beta-release">
<h1>Version 0.2.0 (beta release)<a class="headerlink" href="#version-0-2-0-beta-release" title="Permalink to this headline">¶</a></h1>
<p>The following enhancements and bug fixes were implemented
for this release:</p>
<div class="section" id="enhancements">
<h2>Enhancements<a class="headerlink" href="#enhancements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="improvements-for-plotting-results">
<h3>Improvements for plotting results<a class="headerlink" href="#improvements-for-plotting-results" title="Permalink to this headline">¶</a></h3>
<p>This PR make some modifications in results.py</p>
<ul class="simple">
<li><p>Add show(camp) to show campbell bokeh plotting</p></li>
<li><p>Add command to allign ColorBar axis for better looking</p></li>
<li><p>Add figure dimensions for campbell bokeh plotting</p></li>
<li><p>increases the font size of all axis labels</p></li>
</ul>
<p>Some bokeh figures have the attribute <code class="docutils literal notranslate"><span class="pre">sizing_mode=&quot;stretch_both</span></code>.  This command line is used so that the plotting of the graphics is always the maximum size of the browse. However, this creates a bug in jupyter notebook, and the graphs does not appears. So it should be replaced  by <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> command lines</p>
<ul class="simple">
<li><p>adds an interpolation function to highlight to the user the intersection between the critical frequency curves and the speed line</p></li>
</ul>
</div>
<div class="section" id="index-method">
<h3>Index method<a class="headerlink" href="#index-method" title="Permalink to this headline">¶</a></h3>
<p>Adds <code class="docutils literal notranslate"><span class="pre">.dof_local_index()</span></code> and <code class="docutils literal notranslate"><span class="pre">.dof_global_index()</span></code> methods to the elements.
These methods will return namedtuples with the index for each coordinate based on the following convention:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/18506378/60285143-abde9500-98e3-11e9-83a2-fdbe401d6034.png"><img alt="image" src="https://user-images.githubusercontent.com/18506378/60285143-abde9500-98e3-11e9-83a2-fdbe401d6034.png" /></a>
<p>As an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ross</span> <span class="k">as</span> <span class="nn">rs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ross.materials</span> <span class="kn">import</span> <span class="n">steel</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">le</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i_d</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o_d</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sh_el</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">ShaftElement</span><span class="p">(</span><span class="n">le</span><span class="p">,</span> <span class="n">i_d</span><span class="p">,</span> <span class="n">o_d</span><span class="p">,</span> <span class="n">steel</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sh_el</span><span class="o">.</span><span class="n">dof_local_coordinates</span><span class="p">()</span>
<span class="go">LocalIndex(x0=0, y0=1, alpha0=2, beta0=3, x1=4, y1=5, alpha1=6, beta1=7)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sh_el</span><span class="o">.</span><span class="n">dof_global_coordinates</span><span class="p">()</span>
<span class="go">GlobalIndex(x0=8, y0=9, alpha0=10, beta0=11, x1=12, y1=13, alpha1=14, beta1=15)</span>
</pre></div>
</div>
<p>With this we can change the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">elm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shaft_elements</span><span class="p">:</span>
    <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dofs</span><span class="p">(</span><span class="n">elm</span><span class="p">)</span>
    <span class="n">M0</span><span class="p">[</span><span class="n">n1</span><span class="p">:</span><span class="n">n2</span><span class="p">,</span> <span class="n">n1</span><span class="p">:</span><span class="n">n2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">elm</span><span class="o">.</span><span class="n">M</span><span class="p">()</span>
<span class="k">for</span> <span class="n">elm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">disk_elements</span><span class="p">:</span>
    <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dofs</span><span class="p">(</span><span class="n">elm</span><span class="p">)</span>
    <span class="n">M0</span><span class="p">[</span><span class="n">n1</span><span class="p">:</span><span class="n">n2</span><span class="p">,</span> <span class="n">n1</span><span class="p">:</span><span class="n">n2</span><span class="p">]</span> <span class="o">+=</span> <span class="n">elm</span><span class="o">.</span><span class="n">M</span><span class="p">()</span>
</pre></div>
</div>
<p>To:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">elm</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">elements</span><span class="p">:</span>
    <span class="n">dofs</span> <span class="o">=</span> <span class="n">elm</span><span class="o">.</span><span class="n">dof_global_index</span><span class="p">()</span>
    <span class="n">n0</span> <span class="o">=</span> <span class="n">dofs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">n1</span> <span class="o">=</span> <span class="n">dofs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c1"># +1 to include this dof in the slice</span>
    <span class="n">M0</span><span class="p">[</span><span class="n">n0</span><span class="p">:</span><span class="n">n1</span><span class="p">,</span> <span class="n">n0</span><span class="p">:</span><span class="n">n1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">elm</span><span class="o">.</span><span class="n">M</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="interactions-with-rotor-plotting">
<h3>interactions with rotor plotting<a class="headerlink" href="#interactions-with-rotor-plotting" title="Permalink to this headline">¶</a></h3>
<p>When plotting a rotor, the user will be able to check some parameters of the elements in the output image itself, just by moving the cursor over the desired element, for example:</p>
<p>By moving the cursor over a shaft element the user will see this:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/60343963-dc7a0980-998b-11e9-8a06-8073934132cf.png"><img alt="shaft" src="https://user-images.githubusercontent.com/45969994/60343963-dc7a0980-998b-11e9-8a06-8073934132cf.png" /></a>
<p>And, by moving the cursor over a disk element the user will see this:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/60343980-e7349e80-998b-11e9-9e07-cb72aeea216f.png"><img alt="disk" src="https://user-images.githubusercontent.com/45969994/60343980-e7349e80-998b-11e9-9e07-cb72aeea216f.png" /></a>
<p>I didn’t add the same functionality to bearing elements because the coefficients may vary with rotor speed, and this may cause a misunderstanding to the user.</p>
</div>
<div class="section" id="move-time-response-plotting-to-results">
<h3>Move time response plotting to results<a class="headerlink" href="#move-time-response-plotting-to-results" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Removes the code related to plotting from this file. It was transfered to results.py</p></li>
<li><p>Replaces the method name from plot_time_response to run_time_response.</p></li>
<li><p>Fix ForcedResponseResults docstring</p></li>
</ul>
</div>
<div class="section" id="add-tapered-shaft-element">
<h3>Add tapered shaft element<a class="headerlink" href="#add-tapered-shaft-element" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add new element:  tapered shaft element</p></li>
<li><p>Add class ShaftTaperedElement</p></li>
<li><p>This class have, basically, the same inputs than “ShaftElement”. The difference relies on entering the diameters of each side of the element (left and right).</p></li>
<li><p>Patches methods were adapted to draw the conical shape of the element.</p></li>
</ul>
<p>The matrices generated for this element follow the reference below.</p>
<blockquote>
<div><p>Genta, G., and Gugliotta, A. (1988). A conical element for finite element rotor dynamics, Journal of Sound and Vibration 120,175-182.</p>
</div></blockquote>
</div>
<div class="section" id="improving-plot-rotor">
<h3>Improving plot rotor<a class="headerlink" href="#improving-plot-rotor" title="Permalink to this headline">¶</a></h3>
<p>This PR modifies the plotting size of disks, bearings and seals. The size, previously based on shaft length, is now calculated based on the shaft diameter.</p>
</div>
<div class="section" id="add-check-slenderness-ratio-method">
<h3>Add Check slenderness ratio method<a class="headerlink" href="#add-check-slenderness-ratio-method" title="Permalink to this headline">¶</a></h3>
<p>Adds a method that will return the colored rotor plot if the condition to the mininum slenderness ratio is not met.</p>
<p>Now using <code class="docutils literal notranslate"><span class="pre">.plot.rotor()</span></code> won’t display the colored rotor anymore. Instead, the user will call <code class="docutils literal notranslate"><span class="pre">.check_slenderness_ratio()</span></code> to check this attribute.</p>
</div>
<div class="section" id="make-free-body-diagram-more-readable">
<h3>Make Free-Body Diagram more readable<a class="headerlink" href="#make-free-body-diagram-more-readable" title="Permalink to this headline">¶</a></h3>
<p>Pull Request to fix Issue #243</p>
<ul class="simple">
<li><p>Slightly increases the size of the figures</p></li>
<li><p>Arrows have a fixed length now (as shown in this figure below);</p></li>
<li><p>Arrows now have different colors to distinguish forces (from shaft, disks or bearings/seals);</p></li>
<li><p>Labels were rotated 90º;</p></li>
<li><p>Text font size reduced to “9pt”;</p></li>
<li><p>Y axis is hidden. The force values are only displayed only next to the arrows, without size ratio.</p></li>
</ul>
</div>
<div class="section" id="replace-bearing-plot-style-remove-element-length-dependency-from-glyphs">
<h3>Replace bearing plot style / remove element length dependency from glyphs<a class="headerlink" href="#replace-bearing-plot-style-remove-element-length-dependency-from-glyphs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bearing representation changes from a simple square to a spring-damper set.</p></li>
<li><p>Fix bug glyphs were plotted on the minimum outer diameters of a shaft node.</p></li>
<li><p>Removes length attribute from <code class="docutils literal notranslate"><span class="pre">patch()</span></code> and <code class="docutils literal notranslate"><span class="pre">bokeh_patch()</span></code> of BearingElement and DiskElement classes.</p></li>
</ul>
<p>Bokeh plot</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/62865813-ce870a80-bce5-11e9-84ae-243a21b2006c.png"><img alt="bokeh_plot(2)" src="https://user-images.githubusercontent.com/45969994/62865813-ce870a80-bce5-11e9-84ae-243a21b2006c.png" /></a>
<p>Matplotlib plot</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/62865820-d34bbe80-bce5-11e9-81ca-4a73ad6057e2.png"><img alt="Figure_1" src="https://user-images.githubusercontent.com/45969994/62865820-d34bbe80-bce5-11e9-81ca-4a73ad6057e2.png" /></a>
</div>
<div class="section" id="add-api-report">
<h3>Add API_report<a class="headerlink" href="#add-api-report" title="Permalink to this headline">¶</a></h3>
<p>Work in Progress</p>
<p>This PR adds some plotting styles follwing the API reference:</p>
<ul class="simple">
<li><p>Separation Margin</p></li>
<li><p>Amplification Factor</p></li>
<li><p>Table of API parameters</p></li>
</ul>
<p>It follows the Issue #195</p>
</div>
<div class="section" id="add-new-tag-attribute-to-elements">
<h3>Add new “Tag” attribute to elements<a class="headerlink" href="#add-new-tag-attribute-to-elements" title="Permalink to this headline">¶</a></h3>
<p>Disk, bearing and seal elements now get an attribute called “Tag”.
This allows the user to name the elements to help refer to the actual equipment (impellers, blades, labyrinth seal…)</p>
<p>If the user do not input a tag, it’s named after:</p>
<ul class="simple">
<li><p>Disk 1, 2, 3…</p></li>
<li><p>Bearing 1, 2, 3…</p></li>
<li><p>Seal 1, 2, 3…</p></li>
</ul>
<p>As bearings and seals are input in the same list of objects, this situation below may happens:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">rotor_example</span><span class="p">():</span>
    <span class="n">i_d</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">o_d</span> <span class="o">=</span> <span class="mf">0.05</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">6</span>
    <span class="n">L</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.25</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

    <span class="n">shaft_elem</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">ShaftElement</span><span class="p">(</span>
            <span class="n">l</span><span class="p">,</span> <span class="n">i_d</span><span class="p">,</span> <span class="n">o_d</span><span class="p">,</span> <span class="n">steel</span><span class="p">,</span> <span class="n">shear_effects</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rotary_inertia</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">gyroscopic</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">L</span>
    <span class="p">]</span>

    <span class="n">disk0</span> <span class="o">=</span> <span class="n">DiskElement</span><span class="o">.</span><span class="n">from_geometry</span><span class="p">(</span>
        <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">material</span><span class="o">=</span><span class="n">steel</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">i_d</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">o_d</span><span class="o">=</span><span class="mf">0.28</span>
    <span class="p">)</span>
    <span class="n">disk1</span> <span class="o">=</span> <span class="n">DiskElement</span><span class="o">.</span><span class="n">from_geometry</span><span class="p">(</span>
        <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">material</span><span class="o">=</span><span class="n">steel</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">i_d</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">o_d</span><span class="o">=</span><span class="mf">0.28</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;disk_test&quot;</span>
    <span class="p">)</span>
    <span class="n">disk2</span> <span class="o">=</span> <span class="n">DiskElement</span><span class="o">.</span><span class="n">from_geometry</span><span class="p">(</span>
        <span class="n">n</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">material</span><span class="o">=</span><span class="n">steel</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.07</span><span class="p">,</span> <span class="n">i_d</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">o_d</span><span class="o">=</span><span class="mf">0.28</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;disk_test2&quot;</span>
    <span class="p">)</span>

    <span class="n">stfx</span> <span class="o">=</span> <span class="mf">1e8</span>
    <span class="n">stfy</span> <span class="o">=</span> <span class="mf">1e8</span>
    <span class="n">bearing0</span> <span class="o">=</span> <span class="n">BearingElement</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">kxx</span><span class="o">=</span><span class="n">stfx</span><span class="p">,</span> <span class="n">kyy</span><span class="o">=</span><span class="n">stfy</span><span class="p">,</span> <span class="n">cxx</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;brg&quot;</span><span class="p">)</span>
    <span class="n">bearing1</span> <span class="o">=</span> <span class="n">BearingElement</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">kxx</span><span class="o">=</span><span class="n">stfx</span><span class="p">,</span> <span class="n">kyy</span><span class="o">=</span><span class="n">stfy</span><span class="p">,</span> <span class="n">cxx</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">seal0</span> <span class="o">=</span> <span class="n">SealElement</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">kxx</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span> <span class="n">kyy</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span> <span class="n">cxx</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">cyy</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">tag</span><span class="o">=</span><span class="s2">&quot;seal&quot;</span><span class="p">)</span>
    <span class="n">seal1</span> <span class="o">=</span> <span class="n">SealElement</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">kxx</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span> <span class="n">kyy</span><span class="o">=</span><span class="mf">1e2</span><span class="p">,</span> <span class="n">cxx</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">cyy</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">Rotor</span><span class="p">(</span><span class="n">shaft_elem</span><span class="p">,</span> <span class="p">[</span><span class="n">disk0</span><span class="p">,</span> <span class="n">disk1</span><span class="p">,</span> <span class="n">disk2</span><span class="p">],</span> <span class="p">[</span><span class="n">bearing0</span><span class="p">,</span> <span class="n">seal0</span><span class="p">,</span> <span class="n">seal1</span><span class="p">,</span> <span class="n">bearing1</span><span class="p">])</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">rotor</span> <span class="o">=</span> <span class="n">rotor_example</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">rotor</span><span class="o">.</span><span class="n">df_bearings</span><span class="p">[</span><span class="s2">&quot;tag&quot;</span><span class="p">]</span>
<span class="mi">0</span>    <span class="n">brg</span>
<span class="mi">1</span>    <span class="n">seal</span>
<span class="mi">2</span>    <span class="n">Seal</span> <span class="mi">2</span>
<span class="mi">3</span>    <span class="n">Bearing</span> <span class="mi">3</span>
<span class="n">Name</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span> <span class="n">dtype</span><span class="p">:</span> <span class="nb">object</span>
</pre></div>
</div>
<p>The counting for bearings and seals is not independent. I don’t see it as big deal, but I’m open to suggestions.</p>
</div>
<div class="section" id="add-separated-dataframe-to-seals">
<h3>Add separated DataFrame to seals<a class="headerlink" href="#add-separated-dataframe-to-seals" title="Permalink to this headline">¶</a></h3>
<p>This splits bearings from seals in two different dataframes:</p>
<ul class="simple">
<li><p>df_bearings for bearings</p></li>
<li><p>df_seals for seals</p></li>
</ul>
<p>It aims to better organize the elements and to avoid code interpretation problems such as in static analysis:</p>
<p>This is the free-body diagram of an example while seals and bearings are merged in same dataframe. The code interprets seals like bearings and calculate reaction forces where both seals are placed:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/64347715-c6f81000-cfca-11e9-83b1-1acc0cb47c90.PNG"><img alt="antigo" src="https://user-images.githubusercontent.com/45969994/64347715-c6f81000-cfca-11e9-83b1-1acc0cb47c90.PNG" /></a>
<p>And now, spliting bearings and seals:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/64347738-d2e3d200-cfca-11e9-88fb-3e74144f45a4.PNG"><img alt="novo" src="https://user-images.githubusercontent.com/45969994/64347738-d2e3d200-cfca-11e9-88fb-3e74144f45a4.PNG" /></a>
<p>Also, fix a bug when modeling too flexible bearings, displacement were getting larger than acceptable.
It uses axuliar bearings with high stiffness, considering almost zero displacement in bearing nodes.</p>
</div>
<div class="section" id="split-staticresults-plot-method">
<h3>Split StaticResults plot method<a class="headerlink" href="#split-staticresults-plot-method" title="Permalink to this headline">¶</a></h3>
<p>This commit splits the plot method in four:</p>
<ul class="simple">
<li><p>plot_deformation()</p></li>
<li><p>plot free_body_diagram()</p></li>
<li><p>plot_shearing_force()</p></li>
<li><p>plot_bending_moment()
This is related to Issue #303.</p></li>
</ul>
</div>
<div class="section" id="add-ballbearing-and-rollerbearing-element">
<h3>Add BallBearing and RollerBearing Element<a class="headerlink" href="#add-ballbearing-and-rollerbearing-element" title="Permalink to this headline">¶</a></h3>
<p>This PR adds two new classes:</p>
<ul class="simple">
<li><p>BallBearingElement</p></li>
<li><p>RollerBearingElement</p></li>
</ul>
<p>These classes create a bearing element for ball and roller bearings models. They are instantiated based os some geometric and constructive parameters like: number of rotating elements, size (diameter for ballbearing; length for rollerbearing) of the rotating elements, contact angle, and static loading force.</p>
<p>The direct stiffness coefficientes are calculated using these parameters.</p>
<p>I also left an opened option to instantiate the direct damping coefficients. But if it’s set as None, they are calculated based on the stiffness coefficient as the literature suggests.
However the cross-coupling coefficients are set to zero, and the coefficients are not dependent on speed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">n</span><span class="p">,</span>
    <span class="n">n_balls</span><span class="p">,</span>
    <span class="n">d_balls</span><span class="p">,</span>
    <span class="n">fs</span><span class="p">,</span>
    <span class="n">alpha</span><span class="p">,</span>
    <span class="n">cxx</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cyy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>

    <span class="n">Kb</span> <span class="o">=</span> <span class="mf">13.0e6</span>
    <span class="n">kyy</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Kb</span> <span class="o">*</span> <span class="n">n_balls</span> <span class="o">**</span> <span class="p">(</span><span class="mf">2.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">d_balls</span> <span class="o">**</span> <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span>
        <span class="n">fs</span> <span class="o">**</span> <span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">))</span> <span class="o">**</span> <span class="p">(</span><span class="mf">5.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">nb</span> <span class="o">=</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">]</span>
    <span class="n">ratio</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.46</span><span class="p">,</span> <span class="mf">0.64</span><span class="p">,</span> <span class="mf">0.73</span><span class="p">]</span>
    <span class="n">dict_ratio</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">nb</span><span class="p">,</span> <span class="n">ratio</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">n_balls</span> <span class="ow">in</span> <span class="n">dict_ratio</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">kxx</span> <span class="o">=</span> <span class="n">dict_ratio</span><span class="p">[</span><span class="n">n_balls</span><span class="p">]</span> <span class="o">*</span> <span class="n">kyy</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">interpolate</span><span class="o">.</span><span class="n">interp1d</span><span class="p">(</span><span class="n">nb</span><span class="p">,</span> <span class="n">ratio</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;quadratic&quot;</span><span class="p">)</span>
        <span class="n">kxx</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">n_balls</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">cxx</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cxx</span> <span class="o">=</span> <span class="mf">1.25e-5</span> <span class="o">*</span> <span class="n">kxx</span>
    <span class="k">if</span> <span class="n">cyy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cyy</span> <span class="o">=</span> <span class="mf">1.25e-5</span> <span class="o">*</span> <span class="n">kyy</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">,</span>
        <span class="n">w</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">kxx</span><span class="o">=</span><span class="n">kxx</span><span class="p">,</span>
        <span class="n">kxy</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">kyx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">kyy</span><span class="o">=</span><span class="n">kyy</span><span class="p">,</span>
        <span class="n">cxx</span><span class="o">=</span><span class="n">cxx</span><span class="p">,</span>
        <span class="n">cxy</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">cyx</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">cyy</span><span class="o">=</span><span class="n">cyy</span><span class="p">,</span>
        <span class="n">tag</span><span class="o">=</span><span class="n">tag</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="add-condition-to-shafttaperedelement-instantiation">
<h3>Add condition to ShaftTaperedElement instantiation<a class="headerlink" href="#add-condition-to-shafttaperedelement-instantiation" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Add a condition if the user do not attribute any value to inner and outer diameters on the right side, the values are automatically set to be equal the left side.</p></li>
<li><p>Also, move the “material” input to the first position, so the geometric parameters can be grouped together.</p></li>
<li><p>Adapt the examples in docstring.</p></li>
<li><p>Moves the inputs from ShaftTaperedElement to match the new position set.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ShaftTaperedElement</span><span class="p">(</span><span class="n">Element</span><span class="p">):</span>
  <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
      <span class="bp">self</span><span class="p">,</span>
      <span class="n">material</span><span class="p">,</span>
      <span class="n">L</span><span class="p">,</span>
      <span class="n">i_d_l</span><span class="p">,</span>
      <span class="n">o_d_l</span><span class="p">,</span>
      <span class="n">i_d_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">o_d_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">n</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
      <span class="n">axial_force</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
      <span class="n">torque</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
      <span class="n">shear_effects</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
      <span class="n">rotary_inertia</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
      <span class="n">gyroscopic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
      <span class="n">shear_method_calc</span><span class="o">=</span><span class="s2">&quot;cowper&quot;</span><span class="p">,</span>
      <span class="n">tag</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
  <span class="p">):</span>

      <span class="k">if</span> <span class="n">i_d_r</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
          <span class="n">i_d_r</span> <span class="o">=</span> <span class="n">i_d_l</span>
      <span class="k">if</span> <span class="n">o_d_r</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
          <span class="n">o_d_r</span> <span class="o">=</span> <span class="n">o_d_l</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="patches-for-pointmass-element">
<h3>Patches for PointMass element<a class="headerlink" href="#patches-for-pointmass-element" title="Permalink to this headline">¶</a></h3>
<p>As required by issue #310</p>
</div>
<div class="section" id="add-repr-eq-and-example-to-point-mass-element">
<h3>Add __repr__, __eq__, and example() to point mass element<a class="headerlink" href="#add-repr-eq-and-example-to-point-mass-element" title="Permalink to this headline">¶</a></h3>
<p>This commit adds the following methods to PointMass class:</p>
<ul class="simple">
<li><p><strong>repr</strong> - representative method;</p></li>
<li><p><strong>eq</strong> - comparasion method;</p></li>
<li><p>point_mass_example() - to run some doctests.</p></li>
</ul>
</div>
<div class="section" id="improvements-to-static-analysis-documentation">
<h3>Improvements to Static Analysis Documentation<a class="headerlink" href="#improvements-to-static-analysis-documentation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Related to Issue #327</p></li>
<li><p>Remove force_data dictionary</p></li>
<li><p>Get the items and transform them in Rotor attributes</p>
<ul>
<li><p>shaft_weight - Shaft total weight</p></li>
<li><p>disk_forces - Weight forces of each disk</p></li>
<li><p>bearing_reaction_forces - The static reaction forces on each bearing</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="general-modifications-in-campbellresults">
<h3>General Modifications in CampbellResults<a class="headerlink" href="#general-modifications-in-campbellresults" title="Permalink to this headline">¶</a></h3>
<p>This is related to Issues #326 and #328.</p>
<ul class="simple">
<li><p>Introduce a condition to add the hover tool only if an harmonic crosses a critical speed curve.</p></li>
<li><p>Remove some unused imports.</p></li>
<li><p>In _plot_bokeh:</p>
<ul>
<li><p>Change colormap from viridis to Red-Blue</p></li>
<li><p>Add diferent colors to harmonics lines</p></li>
<li><p>Make glyphs on legend with same color</p></li>
</ul>
</li>
<li><p>In _plot_matplotlib:</p>
<ul>
<li><p>Add diferent colors to harmonics lines</p></li>
</ul>
</li>
<li><p>For both methods:
Restructure code to increase efficiency (reduce plotting time): I could the plot time in an half by rearranging some routines.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ross</span> <span class="k">as</span> <span class="nn">rs</span>
<span class="n">rotor</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="n">rotor_example</span><span class="p">()</span>
<span class="n">camp</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">run_campbell</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="n">show</span><span class="p">(</span><span class="n">camp</span><span class="p">)</span>
</pre></div>
</div>
<p>I’ve measured the time just to run the .plot(). It was taking 2.5s for the rotor_example(). Rearranging the code, it has been reduced to 1.2s for this same example.</p>
</div>
<div class="section" id="add-summary-table-to-plot-rotor-information">
<h3>Add summary table to plot rotor information<a class="headerlink" href="#add-summary-table-to-plot-rotor-information" title="Permalink to this headline">¶</a></h3>
<p>Related to Issue #327.</p>
<p>It’s a first idea from what the summary will become.
The class get the values stored in dataframes and turns them into a bokeh widget in table format.</p>
<p>We still can build other tables to make it more complete and useful to manipulate data.</p>
</div>
<div class="section" id="improvements-to-summaryresults">
<h3>Improvements to SummaryResults<a class="headerlink" href="#improvements-to-summaryresults" title="Permalink to this headline">¶</a></h3>
<p>Related to Issue #327
Follows the PR #338</p>
<ul class="simple">
<li><p>Add new attribute “tag” to name the rotor;</p></li>
<li><p>Add CG and Moment of Inertia parameters;</p></li>
<li><p>Add new attributes to .summary() method;</p></li>
<li><p>Add a system of Tabs that allows the user to alternate between
tables;</p></li>
<li><p>Tables are separeted in:</p>
<ul>
<li><p>Rotor summary</p></li>
<li><p>Shaft summary</p></li>
<li><p>Disk summary</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="add-stability-level-1-analysis">
<h3>Add Stability Level 1 analysis<a class="headerlink" href="#add-stability-level-1-analysis" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>This analysis consider a anticipated cross coupling QA based on conditions at the normal operating point and the cross-coupling required to produce a zero log decrement, Q0.</p></li>
<li><p>Add attribute “rotor_type”</p>
<ul>
<li><p>This attribute is necessary to distinguish overhung and between bearings rotors.</p></li>
<li><p>The unbalance forces and and the respective nodes where they are introduced depends on this information.</p></li>
</ul>
</li>
<li><p>Improve unbalance force method.</p>
<ul>
<li><p>With this improvement, the unbalance forces are calculated according to the rotor_type and
consideres the disks and shaft wheight (if overhung).</p></li>
</ul>
</li>
<li><p>Change mode_shape to find nodes according to rotor_type</p>
<ul>
<li><p>The method .mode_shapes() was capturing the maximum points from the rotor’s mode shapes without checking if it was overhung or between bearings.</p></li>
<li><p>For rotors where the disk is cantilevered beyond the bearings, unbalance shall be added at the disk. So, the method now checks the rotor_type to define the nodes correctly.</p></li>
</ul>
</li>
<li><p>Add machine_type and disk_nodes attribute</p>
<ul>
<li><p>Machine_type will be useful to help the code to distinguish between compressors, turbines, etc. Because each machine type has their own conditions to be calculated.</p></li>
<li><p>Disk_nodes is useful to collect the disk of interest. if we are working with a overhung rotor, disk_nodes will collect the disk which are overhung only, for example.</p></li>
</ul>
</li>
</ul>
<p>This Level 1 analysis does not have the screening criteria yet.
The next step is to implement the Level 2 analysis. Once I get to work on it, I’ll add the screening criteria. I still need to organize some ideas for the next step.</p>
</div>
<div class="section" id="add-bearing-summary-table">
<h3>Add Bearing Summary Table<a class="headerlink" href="#add-bearing-summary-table" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>add a summary table for bearing elements: for now it displays only where it’s placed and the reaction forces.</p></li>
<li><p>fix bug: when setting and disk or bearing element in the last node, the code would fail</p></li>
<li><p>other minor changes</p></li>
</ul>
</div>
<div class="section" id="improvements-to-api-report-py-add-test-api-report-py">
<h3>Improvements to api_report.py - Add test_api_report.py<a class="headerlink" href="#improvements-to-api-report-py-add-test-api-report-py" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add Stability level 1 screening criteria;</p></li>
<li><p>Modifies the code to storage the cross-coupling range for each rotor stage (or impeller). This is useful to distinguish the cross-coupling evaluation for different <code class="docutils literal notranslate"><span class="pre">rotor_types</span></code> (between bearings, overhung…);</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">.summary()</span></code> method;</p></li>
<li><p>Add summary for stability level 1</p></li>
</ul>
</div>
<div class="section" id="add-stability-analysis-level-2">
<h3>Add stability analysis level 2<a class="headerlink" href="#add-stability-analysis-level-2" title="Permalink to this headline">¶</a></h3>
<p>For the level 2 stability analysis additional sources that contribute to the rotor stability shall be considered. These sources shall replace the cross-coupling Qa, calculated in the stability analysis level 1</p>
</div>
<div class="section" id="visual-improvements-to-graphs">
<h3>Visual improvements to graphs<a class="headerlink" href="#visual-improvements-to-graphs" title="Permalink to this headline">¶</a></h3>
<p>The labels, ticks and titles font size from bokeh figure were small when putting it presentations. So I’ve increased the font size of all graphs.</p>
<ul class="simple">
<li><p>Add new tab to the <code class="docutils literal notranslate"><span class="pre">.summary()</span></code> with stability level 2 data;</p></li>
<li><p>Change stability level 2 labels for better user understanding when using <code class="docutils literal notranslate"><span class="pre">.summary()</span></code>. The labels include explicitly all the components considered in a certain analysis (Shaft + Bearing + Disk + Seal…);</p></li>
<li><p>Increases labels, titiles and tick font sizes (results.py and api_report.py);</p></li>
<li><p>Add mcs speed to evaluate mode shapes (api_report.py);</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">.unbalance_response()</span></code> plot size to match results.py file;</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">.stability_level_1()</span></code> remove condition from returning and add it as attribute;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.run_modal().plot_mode()</span></code> add legend informing the whirl direction.</p></li>
</ul>
</div>
<div class="section" id="add-method-to-plot-orbit">
<h3>Add method to plot orbit<a class="headerlink" href="#add-method-to-plot-orbit" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">.run_orbit_response()</span></code> method to rotor_assembly.py.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">.run_orbit_response()</span></code> calculates the orbit for a rotor’s given node, speed and forces.</p></li>
</ul>
</li>
<li><p>Add class <code class="docutils literal notranslate"><span class="pre">OrbitResponseResults</span></code> to results.py.</p>
<ul>
<li><p>Class used to store results and provide plots for orbit response.</p></li>
</ul>
</li>
</ul>
<p>Example using this new method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rotor</span> <span class="o">=</span> <span class="n">rotor_example</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">speed</span> <span class="o">=</span> <span class="mf">500.0</span>                                           <span class="c1"># pick a rotor speed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">size</span> <span class="o">=</span> <span class="mi">10000</span>                                            <span class="c1"># time array&#39;s size</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node</span> <span class="o">=</span> <span class="mi">3</span>                                                <span class="c1"># node of interest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span>                            <span class="c1"># create time array</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">size</span><span class="p">,</span> <span class="n">rotor</span><span class="o">.</span><span class="n">ndof</span><span class="p">))</span>                        <span class="c1"># create force vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span><span class="p">[:,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>                     <span class="c1"># introduce a periodic force in a single dof</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span><span class="p">[:,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">node</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>                 <span class="c1"># introduce a periodic force in a single dof</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">run_orbit_response</span><span class="p">(</span><span class="n">speed</span><span class="p">,</span> <span class="n">F</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>  <span class="c1"># run orbit response</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">show</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">plot</span><span class="p">())</span>                                   <span class="c1"># plot orbit response</span>
</pre></div>
</div>
</div>
<div class="section" id="d-plots-for-orbit-response">
<h3>3D plots for orbit response<a class="headerlink" href="#d-plots-for-orbit-response" title="Permalink to this headline">¶</a></h3>
<p>Related to PR #385.</p>
</div>
</div>
<div class="section" id="api-changes">
<h2>API changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>Fix Campbell’s strange behavior for precession</p>
</div></blockquote>
<hr class="docutils" />
<div class="section" id="fix-equality-for-bearing-element">
<h3>Fix equality for bearing element<a class="headerlink" href="#fix-equality-for-bearing-element" title="Permalink to this headline">¶</a></h3>
<p>Fixes the equality for bearing element, allowing the comparison with
objects from different types, e.g. bearing == 1 will return False,
before an AttributeError was raised since int doesn’t have .<strong>dict</strong>.
This also removes pytest as a dependence for the user.</p>
</div>
<div class="section" id="add-import-to-axes3d">
<h3>Add import to Axes3d<a class="headerlink" href="#add-import-to-axes3d" title="Permalink to this headline">¶</a></h3>
<p>The import has been added to the results module because the mode shape
plot needs this to work. Although it looks like the import is not being
used (this is highlighted by linters), matplotlib, for some strange
reason, actually needs this to use the projection=’3d’.
A doctest has been added to the mode shape plot for the tests to fail
if this import is removed.</p>
</div>
<div class="section" id="fix-bearing-type-definition-and-add-new-test">
<h3>Fix bearing type definition and add new test<a class="headerlink" href="#fix-bearing-type-definition-and-add-new-test" title="Permalink to this headline">¶</a></h3>
<p>Fix the bearing type definition and also add a new test that checks if a second analytical way to calculate the pressure matrix matches the numerical way.
Close #175</p>
</div>
<div class="section" id="id1">
<h3>Improvements for plotting results<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>This PR make some modifications in results.py</p>
<ul class="simple">
<li><p>Add show(camp) to show campbell bokeh plotting</p></li>
<li><p>Add command to allign ColorBar axis for better looking</p></li>
<li><p>Add figure dimensions for campbell bokeh plotting</p></li>
<li><p>increases the font size of all axis labels</p></li>
</ul>
<p>Some bokeh figures have the attribute <code class="docutils literal notranslate"><span class="pre">sizing_mode=&quot;stretch_both</span></code>.  This command line is used so that the plotting of the graphics is always the maximum size of the browse. However, this creates a bug in jupyter notebook, and the graphs does not appears. So it should be replaced  by <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> command lines</p>
<ul class="simple">
<li><p>adds an interpolation function to highlight to the user the intersection between the critical frequency curves and the speed line</p></li>
</ul>
</div>
<div class="section" id="fix-bug-plotting-unbalance-response">
<h3>Fix bug - plotting unbalance response<a class="headerlink" href="#fix-bug-plotting-unbalance-response" title="Permalink to this headline">¶</a></h3>
<p>Unbalance response was not plotting when calling it using matplotlib</p>
</div>
<div class="section" id="id2">
<h3>Make Free-Body Diagram more readable<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Pull Request to fix Issue #243</p>
<ul class="simple">
<li><p>Slightly increases the size of the figures</p></li>
<li><p>Arrows have a fixed length now (as shown in this figure below);</p></li>
<li><p>Arrows now have different colors to distinguish forces (from shaft, disks or bearings/seals);</p></li>
<li><p>Labels were rotated 90º;</p></li>
<li><p>Text font size reduced to “9pt”;</p></li>
<li><p>Y axis is hidden. The force values are only displayed only next to the arrows, without size ratio.</p></li>
</ul>
<blockquote>
<div><p>Fix inconsistencies in the mass and gyroscopic matrices; New tests for shaft tapered element</p>
</div></blockquote>
<hr class="docutils" />
<p>I found some problems in shaft tapered element matrices. Fow now I’ve fixed the issues on mass and gyroscopic matrices. Besides this PR modifies the tests for this class, adding tests to compare two cylindrical elements built from <code class="docutils literal notranslate"><span class="pre">ShaftElement</span></code> and <code class="docutils literal notranslate"><span class="pre">ShaftTaperedElement</span></code> classes. However, tests for stiffness matrices are skipped.</p>
</div>
<div class="section" id="fix-typo-in-repr">
<h3>Fix typo in __repr__<a class="headerlink" href="#fix-typo-in-repr" title="Permalink to this headline">¶</a></h3>
<p>It follows the Issue #255.</p>
</div>
<div class="section" id="fix-inconsistencies-in-the-stiffness-matrix">
<h3>Fix inconsistencies in the stiffness matrix<a class="headerlink" href="#fix-inconsistencies-in-the-stiffness-matrix" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix some typos in geometry coefficients;</p></li>
<li><p>Fix stiffness matrix formula for shaft tapered elements;</p></li>
<li><p>Fix docstrings for M(), K(), G() in ShaftTaperedElement;</p></li>
<li><p>Add better docstrings to ShaftTaperedElement.</p></li>
</ul>
<p>Fix tests to match the changes done in shaft_element.py:</p>
<ul class="simple">
<li><p>Fix stiffness matrix test;</p></li>
<li><p>Fix element attribute tests ;</p></li>
<li><p>Fix comparation tests.</p></li>
</ul>
</div>
<div class="section" id="fixing-doctests">
<h3>Fixing doctests<a class="headerlink" href="#fixing-doctests" title="Permalink to this headline">¶</a></h3>
<p>Well, since I have forgotten to add the .py extention on api_report file, the CI’s were not running the tests on it. And now that I did it, the building is failing due some tests.</p>
<p>This PR tries to fix this problem on api_report.py and in results.py (with new docstrings on ModeShapeResults)</p>
<p>The last PR (#272) was a failure actually.</p>
</div>
<div class="section" id="adapt-convergence-analysis-to-shafttaperedelement">
<h3>Adapt convergence analysis to ShaftTaperedElement<a class="headerlink" href="#adapt-convergence-analysis-to-shafttaperedelement" title="Permalink to this headline">¶</a></h3>
<p>Now the convergence analysis uses the class ShaftTaperedElement to generate shaft elements since it’s more generic.
This should solve issue #280.</p>
</div>
<div class="section" id="id3">
<h3>Add separated DataFrame to seals<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>This splits bearings from seals in two different dataframes:</p>
<ul class="simple">
<li><p>df_bearings for bearings</p></li>
<li><p>df_seals for seals</p></li>
</ul>
<p>It aims to better organize the elements and to avoid code interpretation problems such as in static analysis:</p>
<p>This is the free-body diagram of an example while seals and bearings are merged in same dataframe. The code interprets seals like bearings and calculate reaction forces where both seals are placed:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/64347715-c6f81000-cfca-11e9-83b1-1acc0cb47c90.PNG"><img alt="antigo" src="https://user-images.githubusercontent.com/45969994/64347715-c6f81000-cfca-11e9-83b1-1acc0cb47c90.PNG" /></a>
<p>And now, spliting bearings and seals:</p>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/45969994/64347738-d2e3d200-cfca-11e9-88fb-3e74144f45a4.PNG"><img alt="novo" src="https://user-images.githubusercontent.com/45969994/64347738-d2e3d200-cfca-11e9-88fb-3e74144f45a4.PNG" /></a>
<p>Also, fix a bug when modeling too flexible bearings, displacement were getting larger than acceptable.
It uses axuliar bearings with high stiffness, considering almost zero displacement in bearing nodes.</p>
</div>
<div class="section" id="fix-warning-when-changing-number-of-nodes-to-be-plotted">
<h3>Fix warning when changing number of nodes to be plotted<a class="headerlink" href="#fix-warning-when-changing-number-of-nodes-to-be-plotted" title="Permalink to this headline">¶</a></h3>
<p>Related to Issue #295</p>
</div>
<div class="section" id="remove-unit-conversion-factor">
<h3>Remove unit conversion factor<a class="headerlink" href="#remove-unit-conversion-factor" title="Permalink to this headline">¶</a></h3>
<p>Remove a conversion factor (meters to milimeters) from the plot_deformation() ColumnDataSource.
So the x and y axis units get to be the same.</p>
<p>Related to Issue #312</p>
</div>
<div class="section" id="id4">
<h3>Improvements to Static Analysis Documentation<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Related to Issue #327</p></li>
<li><p>Remove force_data dictionary</p></li>
<li><p>Get the items and transform them in Rotor attributes</p>
<ul>
<li><p>shaft_weight - Shaft total weight</p></li>
<li><p>disk_forces - Weight forces of each disk</p></li>
<li><p>bearing_reaction_forces - The static reaction forces on each bearing</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="fix-bearings-not-connecting-to-tapered-elements">
<h3>Fix bearings not connecting to tapered elements<a class="headerlink" href="#fix-bearings-not-connecting-to-tapered-elements" title="Permalink to this headline">¶</a></h3>
<p>Related to Issue #332</p>
</div>
<div class="section" id="fix-bug-when-plotting-bearings">
<h3>Fix bug when plotting bearings<a class="headerlink" href="#fix-bug-when-plotting-bearings" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix bug when plotting bearing elements in a given node with more than 1 shaft element on it. The bearing would not get correct starting point.</p></li>
<li><p>Fix bug when using scale_factor with point mass. The auxiliar bearing would disattach from the first bearing.</p></li>
</ul>
</div>
<div class="section" id="fix-bug-in-run-freq-response">
<h3>Fix bug in .run_freq_response()<a class="headerlink" href="#fix-bug-in-run-freq-response" title="Permalink to this headline">¶</a></h3>
<p>Fix a bug that happens when calling <code class="docutils literal notranslate"><span class="pre">.run_freq_response()</span></code> with default arguments, i.e:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rotor</span> <span class="o">=</span> <span class="n">rotor_example</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">rotor</span><span class="o">.</span><span class="n">run_freq_response</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>

<span class="go">  File &quot;&lt;ipython-input-3-292fe59ccc9e&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="go">    response = rotor.run_freq_response()</span>

<span class="go">AttributeError: &#39;NoneType&#39; object has no attribute &#39;imag&#39;</span>
</pre></div>
</div>
<p>Since running <code class="docutils literal notranslate"><span class="pre">.run_modal()</span></code> is required to create the attribute <code class="docutils literal notranslate"><span class="pre">evalues</span></code>, we need to call this function (run_modal()) before creating a default speed_range based on the evalues.</p>
<p>This should fix it.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Team ROSS.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.1.<br/>
    </p>
  </div>
</footer>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-157532410-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-157532410-1');
</script>

  </body>
</html>